# Uptag - Apache Yapılandırması

# PHP hata raporlamayı kapat (üretim için)
# php_flag display_errors Off
# php_flag log_errors On

# URL Rewriting
RewriteEngine On
RewriteBase /

# 1. Assets ve Uploads (Statik dosyalar)
RewriteRule ^assets/(.*)$ assets/$1 [L]
RewriteRule ^uploads/(.*)$ public/uploads/$1 [L]

# 2. Zaten public içindeyse dokunma
RewriteCond %{REQUEST_URI} ^/public/ [NC]
RewriteRule ^ - [L]

# 3. Tüm .php isteklerini public klasörüne yönlendir (Ana dizindekileri pas geç)
RewriteRule ^(.*\.php)$ public/$1 [L]

# 4. Diğer her şeyi (temiz URL'ler) public klasörüne yönlendir
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ public/$1 [L]

# 5. Ana dizin isteğini public/index.php'ye yönlendir
RewriteRule ^$ public/index.php [L]

# Güvenlik: Dizin listesini kapat
Options -Indexes

# PHP dosyalarını doğrudan erişilebilir yap
<FilesMatch "\.php$">
    Order Allow,Deny
    Allow from all
</FilesMatch>

# Hassas dosyaları koru
<FilesMatch "^(config|database|schema)\.(php|sql)$">
    Order Deny,Allow
    Deny from all
</FilesMatch>

